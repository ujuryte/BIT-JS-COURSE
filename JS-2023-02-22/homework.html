<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <style>
        img {
            max-height: 200px;
        }

        .search-engine {
            height: 300px;
        }
    </style>
</head>

<body>
    <div class="container mt-5">
        <div class="search-engine border border-secondary-subtle">
            <input type="search" class="form-control" placeholder="Search for breeds..">
            <div class="result mt-5"></div>
        </div>
        <div class="gallery border border-secondary-subtle mt-5">
            <h1>Dog breeds (gallery)</h1>
            <div class="pictures"></div>
        </div>
        <div class="dog-list mt-5">
            <h1>Dog List</h1>
            <select class="all-dogs form-control" onchange="changeBreed(event)">
            </select>
            <div class="breed-pic"></div>
        </div>
    </div>

    <script>

        const searchInput = document.querySelector('input[type="search"]')
        const notFound = 'Breed not found (master breed does not exist)'
        const emptyInput = 'No route found for "GET http://dog.ceo/api/breed//images/random" (from "http://127.0.0.1:5500/") with code: 0'

        searchInput.addEventListener('search', (event) => {
            console.log(event.target.value)
            fetch(`https://dog.ceo/api/breed/${event.target.value}/images/random`)
                .then((atsakymas) => atsakymas.json())
                .then((atsakymas) => {
                    console.log(atsakymas.message)

                    if (atsakymas.message === notFound) {
                        document.querySelector('.result').innerHTML = `<h3>Nuotrauka nerasta</h3>`
                    } else if (atsakymas.message === emptyInput) {
                        document.querySelector('.result').innerHTML = `<h3>Iveskite paieskos zodzius</h3>`
                    } else {
                        document.querySelector('.result').innerHTML = `<img src="${atsakymas.message}" alt="">`
                    }
                });
        })

        let dogArray = []

        fetch('https://dog.ceo/api/breeds/list/all')
            .then((result) => result.json())
            .then((result) => {
               
                const breedString = JSON.stringify(result.message)
                dogArray.push(breedString)

            })

            console.log(dogArray)



        const picGallery = (event) => {

            fetch(`https://dog.ceo/api/breed/${dogArray[0]}/images/random`)
                .then((atsakymas) => atsakymas.json())
                .then((atsakymas) => {
                    console.log(atsakymas.message)

                    // if (atsakymas.message === notFound) {
                    //     document.querySelector('.result').innerHTML = `<h3>Nuotrauka nerasta</h3>`
                    // } else if (atsakymas.message === emptyInput) {
                    //     document.querySelector('.result').innerHTML = `<h3>Iveskite paieskos zodzius</h3>`
                    // } else {
                    //     document.querySelector('.result').innerHTML = `<img src="${atsakymas.message}" alt="">`
                    // }
                });
        }

        const select = document.querySelector('all-dogs')

        fetch('https://dog.ceo/api/breeds/list/all')
            .then((result) => result.json())
            .then((result) => {
                console.log(result)
            //    select.innerHTML = `<option>${result.message}</option>`

            })

        const changeBreed = (e) => {
                console.log(e.target.value)
                fetch(`https://dog.ceo/api/breed/${e.target.value}/images/random`)
                .then((atsakymas) => atsakymas.json())
                .then((atsakymas) => {
                document.querySelector('.rezultatas').innerHTML = `<img src="${atsakymas.message[0]}" alt="">`
            });
            }

    </script>
</body>

</html>